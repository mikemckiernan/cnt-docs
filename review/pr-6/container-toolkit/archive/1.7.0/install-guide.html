<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation Guide &mdash; NVIDIA Cloud Native Technologies  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/nvidia.ico"/>
    <link rel="canonical" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/archive/1.7.0/install-guide.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script src="../../../_static/js/google-analytics/google-analytics-tracker.js"></script>
        <script src="../../../_static/js/google-analytics/google-analytics-write.js"></script>
        <script src="//assets.adobedtm.com/b92787824f2e0e9b68dc2e993f9bd995339fe417/satelliteLib-7ba51e58dc61bcb0e9311aadd02a0108ab24cc6c.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="User Guide" href="user-guide.html" />
    <link rel="prev" title="Architecture Overview" href="arch-overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" > 
            <a href="../../../contents.html">
            <img src="../../../_static/NVLogo_H_B&W.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #76b900;
    }

    .wy-side-nav-search a:link, .wy-nav-top a:link {
      color: #fff;
    }
    .wy-side-nav-search a:visited, .wy-nav-top a:visited {
      color: #fff;
    }
    .wy-side-nav-search a:hover, .wy-nav-top a:hover {
      color: #fff;
    }

    .wy-menu-vertical a:link, .wy-menu-vertical a:visited {
      color: #d9d9d9
    }

    .wy-menu-vertical a:active {
      background-color: #76b900
    }

    .wy-side-nav-search>div.version {
      color: rgba(0, 0, 0, 0.3)
    }

    .wy-nav-content {
      max-width: 1000px;
    }
  </style>
  
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">NVIDIA Container Toolkit:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arch-overview.html">Architecture Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install-guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../archive.html">Archive</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../archive.html#id1">1.11.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../archive.html#id2">1.10.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../archive.html#id3">1.9.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../archive.html#id4">1.8.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../archive.html#id5">1.8.0</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../archive.html#id6">1.7.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../archive.html#id7">1.6.0</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NVIDIA GPU Operator:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/platform-support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/gpu-driver-upgrades.html">GPU Driver Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/install-gpu-operator-vgpu.html">NVIDIA vGPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/install-gpu-operator-nvaie.html">NVIDIA AI Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/openshift/contents.html">GPU Operator on OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/gpu-operator-mig.html">GPU Operator with MIG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/gpu-sharing.html">Time-Slicing GPUs in Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/gpu-operator-rdma.html">GPUDirect RDMA and GPUDirect Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/gpu-operator-kubevirt.html">GPU Operator with KubeVirt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-operator/archive.html">Archive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Kubernetes with GPUs:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../kubernetes/install-k8s.html">Install Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kubernetes/mig-k8s.html">MIG Support in Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kubernetes/anthos-guide.html">NVIDIA GPUs with Google Cloud’s Anthos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GPU Telemetry:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-telemetry/dcgm-exporter.html">DCGM-Exporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gpu-telemetry/dcgm-exporter.html#integrating-gpu-telemetry-into-kubernetes">Integrating GPU Telemetry into Kubernetes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multi-Instance GPU:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../mig/mig.html">Multi-Instance GPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mig/mig-k8s.html">MIG Support in Kubernetes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Driver Containers:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-containers/overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Playground:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../playground/dind.html">Docker-in-Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../playground/x-arch.html">Running Cross-Architecture Containers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../contents.html">NVIDIA Cloud Native Technologies</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../contents.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../archive.html">Archive</a> &raquo;</li>
      <li>Installation Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation-guide">
<span id="install-guide-1-7-0"></span><h1>Installation Guide<a class="headerlink" href="#installation-guide" title="Permalink to this heading"></a></h1>
<section id="supported-platforms">
<h2>Supported Platforms<a class="headerlink" href="#supported-platforms" title="Permalink to this heading"></a></h2>
<p>The NVIDIA Container Toolkit is available on a variety of Linux distributions and supports different container engines.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of NVIDIA Container Toolkit <code class="docutils literal notranslate"><span class="pre">1.7.0</span></code> (<code class="docutils literal notranslate"><span class="pre">nvidia-docker2</span> <span class="pre">&gt;=</span> <span class="pre">2.8.0</span></code>) support for Jetson plaforms
is included for Ubuntu 18.04 and Ubuntu 20.04 distributions. This means that the installation
instructions provided for these distributions are expected to work on Jetson devices.</p>
</div>
<section id="linux-distributions">
<h3>Linux Distributions<a class="headerlink" href="#linux-distributions" title="Permalink to this heading"></a></h3>
<p>Supported Linux distributions are listed below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 19%" />
<col style="width: 21%" />
<col style="width: 11%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>OS Name / Version</p></th>
<th class="head"><p>Identifier</p></th>
<th class="head"><p>amd64 / x86_64</p></th>
<th class="head"><p>ppc64le</p></th>
<th class="head"><p>arm64 / aarch64</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Amazon Linux 1</p></td>
<td><p>amzn1</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Amazon Linux 2</p></td>
<td><p>amzn2</p></td>
<td><p>X</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>Amazon Linux 2017.09</p></td>
<td><p>amzn2017.09</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Amazon Linux 2018.03</p></td>
<td><p>amzn2018.03</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Open Suse/SLES 15.0</p></td>
<td><p>sles15.0</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Open Suse/SLES 15.x</p></td>
<td><p>sles15.1</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Debian Linux 9</p></td>
<td><p>debian9</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Debian Linux 10</p></td>
<td><p>debian10</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Centos 7</p></td>
<td><p>centos7</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Centos 8</p></td>
<td><p>centos8</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>RHEL 7.x (*)</p></td>
<td><p>rhel7.x</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RHEL 8.x (*)</p></td>
<td><p>rhel8.x</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>Ubuntu 16.04</p></td>
<td><p>ubuntu16.04</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Ubuntu 18.04</p></td>
<td><p>ubuntu18.04</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>Ubuntu 20.04</p></td>
<td><p>ubuntu20.04</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>(*) Minor releases of RHEL 7 and RHEL 8 (i.e. 7.4 -&gt; 7.9 are symlinked to <code class="docutils literal notranslate"><span class="pre">centos7</span></code> and 8.0 -&gt; 8.3 are symlinked to <code class="docutils literal notranslate"><span class="pre">centos8</span></code> resp.)</p>
</section>
<section id="container-runtimes">
<h3>Container Runtimes<a class="headerlink" href="#container-runtimes" title="Permalink to this heading"></a></h3>
<p>Supported container runtimes are listed below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 26%" />
<col style="width: 14%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>OS Name / Version</p></th>
<th class="head"><p>amd64 / x86_64</p></th>
<th class="head"><p>ppc64le</p></th>
<th class="head"><p>arm64 / aarch64</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Docker 18.09</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>Docker 19.03</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>Docker 20.10</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>RHEL/CentOS 8 podman</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>CentOS 8 Docker</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RHEL/CentOS 7 Docker</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Red Hat Enterprise Linux (RHEL) 8, Docker is no longer a supported container runtime. See
<a class="reference external" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/building_running_and_managing_containers/index">Building, Running and Managing Containers</a>
for more information on the container tools available on the distribution.</p>
</div>
</section>
</section>
<section id="pre-requisites">
<h2>Pre-Requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this heading"></a></h2>
<section id="nvidia-drivers">
<h3>NVIDIA Drivers<a class="headerlink" href="#nvidia-drivers" title="Permalink to this heading"></a></h3>
<p>Before you get started, make sure you have installed the NVIDIA driver for your Linux distribution. The
recommended way to install drivers is to use the package manager for your distribution but other installer
mechanisms are also available (e.g. by downloading <code class="docutils literal notranslate"><span class="pre">.run</span></code> installers from NVIDIA Driver <a class="reference external" href="https://www.nvidia.com/Download/index.aspx?lang=en-us">Downloads</a>).</p>
<p>For instructions on using your package manager to install drivers from the official CUDA network repository, follow
the steps in this <a class="reference external" href="https://docs.nvidia.com/datacenter/tesla/tesla-installation-notes/index.html">guide</a>.</p>
</section>
<section id="platform-requirements">
<h3>Platform Requirements<a class="headerlink" href="#platform-requirements" title="Permalink to this heading"></a></h3>
<p>The list of prerequisites for running NVIDIA Container Toolkit is described below:</p>
<ol class="arabic simple">
<li><p>GNU/Linux x86_64 with kernel version &gt; 3.10</p></li>
<li><p>Docker &gt;= 19.03 (recommended, but some distributions may include older versions of Docker. The minimum supported version is 1.12)</p></li>
<li><p>NVIDIA GPU with Architecture &gt;= Kepler (or compute capability 3.0)</p></li>
<li><p><a class="reference external" href="http://www.nvidia.com/object/unix.html">NVIDIA Linux drivers</a> &gt;= 418.81.07 (Note that older driver releases or branches are unsupported.)</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your driver version might limit your CUDA capabilities. Newer NVIDIA drivers are backwards-compatible with CUDA Toolkit versions, but each
new version of CUDA requires a minimum driver version. Running a CUDA container requires a machine with at least one CUDA-capable GPU and
a driver compatible with the CUDA toolkit version you are using. The machine running the CUDA container only requires the NVIDIA driver,
the CUDA toolkit doesn’t have to be installed. The <a class="reference external" href="https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#cuda-major-component-versions">CUDA release notes</a>
includes a table of the minimum driver and CUDA Toolkit versions.</p>
</div>
</section>
</section>
<hr class="docutils" />
<section id="docker">
<h2>Docker<a class="headerlink" href="#docker" title="Permalink to this heading"></a></h2>
<section id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h3>
<p>For installing Docker CE, follow the official <a class="reference external" href="https://docs.docker.com/engine/install/">instructions</a> for your supported Linux distribution.
For convenience, the documentation below includes instructions on installing Docker for various Linux distributions.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are migrating fron <code class="docutils literal notranslate"><span class="pre">nvidia-docker</span></code> 1.0, then follow the instructions in the <a class="reference internal" href="migrating-from-1.0.html#migration-1-0-1-7-0"><span class="std std-ref">Migration from nvidia-docker 1.0</span></a> guide.</p>
</div>
<section id="installing-on-ubuntu-and-debian">
<h4>Installing on Ubuntu and Debian<a class="headerlink" href="#installing-on-ubuntu-and-debian" title="Permalink to this heading"></a></h4>
<p>The following steps can be used to setup NVIDIA Container Toolkit on Ubuntu LTS - 16.04, 18.04, 20.4 and Debian - Stretch, Buster distributions.</p>
<section id="setting-up-docker">
<h5>Setting up Docker<a class="headerlink" href="#setting-up-docker" title="Permalink to this heading"></a></h5>
<p>Docker-CE on Ubuntu can be setup using Docker’s official convenience script:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl<span class="w"> </span>https://get.docker.com<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>--now<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Follow the official <a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/">instructions</a> for more details and <a class="reference external" href="https://docs.docker.com/engine/install/linux-postinstall/">post-install actions</a>.</p>
</div>
</section>
<section id="setting-up-nvidia-container-toolkit">
<h5>Setting up NVIDIA Container Toolkit<a class="headerlink" href="#setting-up-nvidia-container-toolkit" title="Permalink to this heading"></a></h5>
<p>Setup the <code class="docutils literal notranslate"><span class="pre">stable</span></code> repository and the GPG key:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ID$VERSION_ID</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/gpgkey<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>apt-key<span class="w"> </span>add<span class="w"> </span>-<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.list<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/nvidia-docker.list
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To get access to <code class="docutils literal notranslate"><span class="pre">experimental</span></code> features such as <a class="reference external" href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">CUDA on WSL</a> or the
new <a class="reference external" href="https://docs.nvidia.com/datacenter/tesla/mig-user-guide/index.html">MIG capability</a> on A100,
you may want to add the <code class="docutils literal notranslate"><span class="pre">experimental</span></code> branch to the repository listing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-container-runtime/experimental/<span class="nv">$distribution</span>/nvidia-container-runtime.list<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/nvidia-container-runtime.list
</pre></div>
</div>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">nvidia-docker2</span></code> package (and dependencies) after updating the package listing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-docker2
</pre></div>
</div>
<p>Restart the Docker daemon to complete the installation after setting the default runtime:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</pre></div>
</div>
<p>At this point, a working setup can be tested by running a base CUDA container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>nvidia/cuda:11.0-base<span class="w"> </span>nvidia-smi
</pre></div>
</div>
<p>This should result in a console output shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| NVIDIA-SMI 450.51.06    Driver Version: 450.51.06    CUDA Version: 11.0     |</span>
<span class="go">|-------------------------------+----------------------+----------------------+</span>
<span class="go">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span>
<span class="go">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span>
<span class="go">|                               |                      |               MIG M. |</span>
<span class="go">|===============================+======================+======================|</span>
<span class="go">|   0  Tesla T4            On   | 00000000:00:1E.0 Off |                    0 |</span>
<span class="go">| N/A   34C    P8     9W /  70W |      0MiB / 15109MiB |      0%      Default |</span>
<span class="go">|                               |                      |                  N/A |</span>
<span class="go">+-------------------------------+----------------------+----------------------+</span>

<span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| Processes:                                                                  |</span>
<span class="go">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span>
<span class="go">|        ID   ID                                                   Usage      |</span>
<span class="go">|=============================================================================|</span>
<span class="go">|  No running processes found                                                 |</span>
<span class="go">+-----------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
</section>
<section id="installing-on-centos-7-8">
<h4>Installing on CentOS 7/8<a class="headerlink" href="#installing-on-centos-7-8" title="Permalink to this heading"></a></h4>
<p>The following steps can be used to setup the NVIDIA Container Toolkit on CentOS 7/8.</p>
<section id="setting-up-docker-on-centos-7-8">
<h5>Setting up Docker on CentOS 7/8<a class="headerlink" href="#setting-up-docker-on-centos-7-8" title="Permalink to this heading"></a></h5>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you’re on a cloud instance such as EC2, then the official <a class="reference external" href="https://wiki.centos.org/Cloud/AWS">CentOS images</a> may not include
tools such as <code class="docutils literal notranslate"><span class="pre">iptables</span></code> which are required for a successful Docker installation. Try this command to get a more functional VM,
before proceeding with the remaining steps outlined in this document.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>tar<span class="w"> </span>bzip2<span class="w"> </span>make<span class="w"> </span>automake<span class="w"> </span>gcc<span class="w"> </span>gcc-c++<span class="w"> </span>vim<span class="w"> </span>pciutils<span class="w"> </span>elfutils-libelf-devel<span class="w"> </span>libglvnd-devel<span class="w"> </span>iptables
</pre></div>
</div>
</div>
<p>Setup the official Docker CE repository:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">CentOS 8</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">CentOS 7</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>config-manager<span class="w"> </span>--add-repo<span class="o">=</span>https://download.docker.com/linux/centos/docker-ce.repo
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum-config-manager<span class="w"> </span>--add-repo<span class="o">=</span>https://download.docker.com/linux/centos/docker-ce.repo
</pre></div>
</div>
</div></div>
<p>Now you can observe the packages available from the <cite>docker-ce</cite> repo:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">CentOS 8</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">CentOS 7</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>repolist<span class="w"> </span>-v
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>repolist<span class="w"> </span>-v
</pre></div>
</div>
</div></div>
<p>Since CentOS does not support specific versions of <code class="docutils literal notranslate"><span class="pre">containerd.io</span></code> packages that are required for newer versions
of Docker-CE, one option is to manually install the <code class="docutils literal notranslate"><span class="pre">containerd.io</span></code> package and then proceed to install the <code class="docutils literal notranslate"><span class="pre">docker-ce</span></code>
packages.</p>
<p>Install the <code class="docutils literal notranslate"><span class="pre">containerd.io</span></code> package:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">CentOS 8</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">CentOS 7</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.4.3-3.1.el7.x86_64.rpm
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.4.3-3.1.el7.x86_64.rpm
</pre></div>
</div>
</div></div>
<p>And now install the latest <code class="docutils literal notranslate"><span class="pre">docker-ce</span></code> package:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">CentOS 8</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">CentOS 7</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>docker-ce<span class="w"> </span>-y
</pre></div>
</div>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>docker-ce<span class="w"> </span>-y
</pre></div>
</div>
</div></div>
<p>Ensure the Docker service is running with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>--now<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</pre></div>
</div>
<p>And finally, test your Docker installation by running the <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>hello-world
</pre></div>
</div>
<p>This should result in a console output shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Unable to find image &#39;hello-world:latest&#39; locally</span>
<span class="go">latest: Pulling from library/hello-world</span>
<span class="go">0e03bdcc26d7: Pull complete</span>
<span class="go">Digest: sha256:7f0a9f93b4aa3022c3a4c147a449bf11e0941a1fd0bf4a8e6c9408b2600777c5</span>
<span class="go">Status: Downloaded newer image for hello-world:latest</span>

<span class="go">Hello from Docker!</span>
<span class="go">This message shows that your installation appears to be working correctly.</span>

<span class="go">To generate this message, Docker took the following steps:</span>
<span class="go">1. The Docker client contacted the Docker daemon.</span>
<span class="go">2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span>
<span class="go">   (amd64)</span>
<span class="go">3. The Docker daemon created a new container from that image which runs the</span>
<span class="go">   executable that produces the output you are currently reading.</span>
<span class="go">4. The Docker daemon streamed that output to the Docker client, which sent it</span>
<span class="go">   to your terminal.</span>

<span class="go">To try something more ambitious, you can run an Ubuntu container with:</span>
<span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash

<span class="go">Share images, automate workflows, and more with a free Docker ID:</span>
<span class="go">https://hub.docker.com/</span>

<span class="go">For more examples and ideas, visit:</span>
<span class="go">https://docs.docker.com/get-started/</span>
</pre></div>
</div>
</section>
<section id="id2">
<h5>Setting up NVIDIA Container Toolkit<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h5>
<p>Setup the <code class="docutils literal notranslate"><span class="pre">stable</span></code> repository and the GPG key:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ID$VERSION_ID</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.repo<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/yum.repos.d/nvidia-docker.repo
</pre></div>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">nvidia-docker2</span></code> package (and dependencies) after updating the package listing:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">CentOS 8</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">CentOS 7</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>clean<span class="w"> </span>expire-cache<span class="w"> </span>--refresh
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>clean<span class="w"> </span>expire-cache
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-5-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-5-5-0" name="5-0" role="tab" tabindex="0">CentOS 8</button><button aria-controls="panel-5-5-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-1" name="5-1" role="tab" tabindex="-1">CentOS 7</button></div><div aria-labelledby="tab-5-5-0" class="sphinx-tabs-panel" id="panel-5-5-0" name="5-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-docker2
</pre></div>
</div>
</div><div aria-labelledby="tab-5-5-1" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-1" name="5-1" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-docker2
</pre></div>
</div>
</div></div>
<p>Restart the Docker daemon to complete the installation after setting the default runtime:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</pre></div>
</div>
<p>At this point, a working setup can be tested by running a base CUDA container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>nvidia/cuda:11.0-base<span class="w"> </span>nvidia-smi
</pre></div>
</div>
<p>This should result in a console output shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| NVIDIA-SMI 450.51.06    Driver Version: 450.51.06    CUDA Version: 11.0     |</span>
<span class="go">|-------------------------------+----------------------+----------------------+</span>
<span class="go">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span>
<span class="go">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span>
<span class="go">|                               |                      |               MIG M. |</span>
<span class="go">|===============================+======================+======================|</span>
<span class="go">|   0  Tesla T4            On   | 00000000:00:1E.0 Off |                    0 |</span>
<span class="go">| N/A   34C    P8     9W /  70W |      0MiB / 15109MiB |      0%      Default |</span>
<span class="go">|                               |                      |                  N/A |</span>
<span class="go">+-------------------------------+----------------------+----------------------+</span>

<span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| Processes:                                                                  |</span>
<span class="go">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span>
<span class="go">|        ID   ID                                                   Usage      |</span>
<span class="go">|=============================================================================|</span>
<span class="go">|  No running processes found                                                 |</span>
<span class="go">+-----------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
</section>
<section id="installing-on-rhel-7">
<h4>Installing on RHEL 7<a class="headerlink" href="#installing-on-rhel-7" title="Permalink to this heading"></a></h4>
<p>The following steps can be used to setup the NVIDIA Container Toolkit on RHEL 7.</p>
<section id="setting-up-docker-on-rhel-7">
<h5>Setting up Docker on RHEL 7<a class="headerlink" href="#setting-up-docker-on-rhel-7" title="Permalink to this heading"></a></h5>
<p>RHEL includes Docker in the <code class="docutils literal notranslate"><span class="pre">Extras</span></code> repository. To install Docker on RHEL 7, first enable this repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>subscription-manager<span class="w"> </span>repos<span class="w"> </span>--enable<span class="w"> </span>rhel-7-server-extras-rpms
</pre></div>
</div>
<p>Docker can then be installed using <code class="docutils literal notranslate"><span class="pre">yum</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>docker<span class="w"> </span>-y
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>More information is available in the KB <a class="reference external" href="https://access.redhat.com/solutions/3727511">article</a>.</p>
</div>
<p>Ensure the Docker service is running with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>--now<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</pre></div>
</div>
<p>And finally, test your Docker installation. We can query the version info:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>-v
</pre></div>
</div>
<p>You should see an output like below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Docker version 1.13.1, build 64e9980/1.13.1</span>
</pre></div>
</div>
<p>And run the <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>hello-world
</pre></div>
</div>
<p>Giving you the following result:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Hello from Docker!</span>
<span class="go">This message shows that your installation appears to be working correctly.</span>

<span class="go">To generate this message, Docker took the following steps:</span>
<span class="go">1. The Docker client contacted the Docker daemon.</span>
<span class="go">2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span>
<span class="go">   (amd64)</span>
<span class="go">3. The Docker daemon created a new container from that image which runs the</span>
<span class="go">   executable that produces the output you are currently reading.</span>
<span class="go">4. The Docker daemon streamed that output to the Docker client, which sent it</span>
<span class="go">   to your terminal.</span>

<span class="go">To try something more ambitious, you can run an Ubuntu container with:</span>
<span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash

<span class="go">Share images, automate workflows, and more with a free Docker ID:</span>
<span class="go">https://hub.docker.com/</span>

<span class="go">For more examples and ideas, visit:</span>
<span class="go">https://docs.docker.com/get-started/</span>
</pre></div>
</div>
</section>
<section id="id3">
<h5>Setting up NVIDIA Container Toolkit<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h5>
<p>Setup the <code class="docutils literal notranslate"><span class="pre">stable</span></code> repository and the GPG key:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ID$VERSION_ID</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.repo<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/yum.repos.d/nvidia-docker.repo
</pre></div>
</div>
<p>On RHEL 7, install the <code class="docutils literal notranslate"><span class="pre">nvidia-container-toolkit</span></code> package (and dependencies) after updating the package listing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>clean<span class="w"> </span>expire-cache
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>nvidia-container-toolkit<span class="w"> </span>-y
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On POWER (<code class="docutils literal notranslate"><span class="pre">ppc64le</span></code>) platforms, the following package should be used: <code class="docutils literal notranslate"><span class="pre">nvidia-container-hook</span></code> instead of <code class="docutils literal notranslate"><span class="pre">nvidia-container-toolkit</span></code></p>
</div>
<p>Restart the Docker daemon to complete the installation after setting the default runtime:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</pre></div>
</div>
<p>At this point, a working setup can be tested by running a base CUDA container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-e<span class="w"> </span><span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span>all<span class="w"> </span>nvidia/cuda:11.0-base<span class="w"> </span>nvidia-smi
</pre></div>
</div>
<p>This should result in a console output shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| NVIDIA-SMI 450.51.06    Driver Version: 450.51.06    CUDA Version: 11.0     |</span>
<span class="go">|-------------------------------+----------------------+----------------------+</span>
<span class="go">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span>
<span class="go">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span>
<span class="go">|                               |                      |               MIG M. |</span>
<span class="go">|===============================+======================+======================|</span>
<span class="go">|   0  Tesla T4            Off  | 00000000:00:1E.0 Off |                    0 |</span>
<span class="go">| N/A   43C    P0    20W /  70W |      0MiB / 15109MiB |      0%      Default |</span>
<span class="go">|                               |                      |                  N/A |</span>
<span class="go">+-------------------------------+----------------------+----------------------+</span>

<span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| Processes:                                                                  |</span>
<span class="go">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span>
<span class="go">|        ID   ID                                                   Usage      |</span>
<span class="go">|=============================================================================|</span>
<span class="go">|  No running processes found                                                 |</span>
<span class="go">+-----------------------------------------------------------------------------+</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on how your RHEL 7 system is configured with SELinux, you may have to use <code class="docutils literal notranslate"><span class="pre">--security-opt=label=disable</span></code> on
the Docker command line to share parts of the host OS that can not be relabeled. Without this option, you may observe this
error when running GPU containers: <code class="docutils literal notranslate"><span class="pre">Failed</span> <span class="pre">to</span> <span class="pre">initialize</span> <span class="pre">NVML:</span> <span class="pre">Insufficient</span> <span class="pre">Permissions</span></code>. However, using this option disables
SELinux separation in the container and the container is executed in an unconfined type. Review the SELinux policies
on your system.</p>
</div>
</section>
</section>
<section id="installing-on-suse-15">
<h4>Installing on SUSE 15<a class="headerlink" href="#installing-on-suse-15" title="Permalink to this heading"></a></h4>
<p>The following steps can be used to setup the NVIDIA Container Toolkit on SUSE SLES 15 and OpenSUSE Leap 15.</p>
<section id="setting-up-docker-on-suse-15">
<h5>Setting up Docker on SUSE 15<a class="headerlink" href="#setting-up-docker-on-suse-15" title="Permalink to this heading"></a></h5>
<p>To install the latest Docker 19.03 CE release on SUSE 15 (OpenSUSE Leap or SLES), you can use the <code class="docutils literal notranslate"><span class="pre">Virtualization::containers</span></code>
<a class="reference external" href="https://software.opensuse.org/download.html?project=Virtualization%3Acontainers&amp;package=docker">project</a>.</p>
<p>First, set up the repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>zypper<span class="w"> </span>addrepo<span class="w"> </span>https://download.opensuse.org/repositories/Virtualization:containers/openSUSE_Leap_15.2/Virtualization:containers.repo<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>zypper<span class="w"> </span>refresh
</pre></div>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">docker</span></code> package:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>zypper<span class="w"> </span>install<span class="w"> </span>docker
</pre></div>
</div>
<p>Ensure the Docker service is running with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>--now<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</pre></div>
</div>
<p>And finally, test your Docker installation by running the <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>hello-world

<span class="go">Unable to find image &#39;hello-world:latest&#39; locally</span>
<span class="go">latest: Pulling from library/hello-world</span>
<span class="go">0e03bdcc26d7: Pull complete</span>
<span class="go">Digest: sha256:7f0a9f93b4aa3022c3a4c147a449bf11e0941a1fd0bf4a8e6c9408b2600777c5</span>
<span class="go">Status: Downloaded newer image for hello-world:latest</span>

<span class="go">Hello from Docker!</span>
<span class="go">This message shows that your installation appears to be working correctly.</span>

<span class="go">To generate this message, Docker took the following steps:</span>
<span class="go">1. The Docker client contacted the Docker daemon.</span>
<span class="go">2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span>
<span class="go">   (amd64)</span>
<span class="go">3. The Docker daemon created a new container from that image which runs the</span>
<span class="go">   executable that produces the output you are currently reading.</span>
<span class="go">4. The Docker daemon streamed that output to the Docker client, which sent it</span>
<span class="go">   to your terminal.</span>

<span class="go">To try something more ambitious, you can run an Ubuntu container with:</span>
<span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash

<span class="go">Share images, automate workflows, and more with a free Docker ID:</span>
<span class="go">https://hub.docker.com/</span>

<span class="go">For more examples and ideas, visit:</span>
<span class="go">https://docs.docker.com/get-started/</span>
</pre></div>
</div>
</section>
<section id="id4">
<h5>Setting up NVIDIA Container Toolkit<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h5>
<p>Setup the <code class="docutils literal notranslate"><span class="pre">stable</span></code> repository and the GPG key:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may have to set <code class="docutils literal notranslate"><span class="pre">$distribution</span></code> variable to <code class="docutils literal notranslate"><span class="pre">opensuse-leap15.1</span></code> in the command below</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ID$VERSION_ID</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>zypper<span class="w"> </span>ar<span class="w"> </span>https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.repo
</pre></div>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">nvidia-docker2</span></code> package (and dependencies) after updating the package listing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>zypper<span class="w"> </span>refresh
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>zypper<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-docker2
</pre></div>
</div>
<p>Restart the Docker daemon to complete the installation after setting the default runtime:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</pre></div>
</div>
<p>At this point, a working setup can be tested by running a base CUDA container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>nvidia/cuda:11.0-base<span class="w"> </span>nvidia-smi
</pre></div>
</div>
<p>This should result in a console output shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| NVIDIA-SMI 450.51.06    Driver Version: 450.51.06    CUDA Version: 11.0     |</span>
<span class="go">|-------------------------------+----------------------+----------------------+</span>
<span class="go">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span>
<span class="go">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span>
<span class="go">|                               |                      |               MIG M. |</span>
<span class="go">|===============================+======================+======================|</span>
<span class="go">|   0  Tesla T4            On   | 00000000:00:1E.0 Off |                    0 |</span>
<span class="go">| N/A   34C    P8     9W /  70W |      0MiB / 15109MiB |      0%      Default |</span>
<span class="go">|                               |                      |                  N/A |</span>
<span class="go">+-------------------------------+----------------------+----------------------+</span>

<span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| Processes:                                                                  |</span>
<span class="go">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span>
<span class="go">|        ID   ID                                                   Usage      |</span>
<span class="go">|=============================================================================|</span>
<span class="go">|  No running processes found                                                 |</span>
<span class="go">+-----------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
</section>
<section id="installing-on-amazon-linux">
<h4>Installing on Amazon Linux<a class="headerlink" href="#installing-on-amazon-linux" title="Permalink to this heading"></a></h4>
<p>The following steps can be used to setup the NVIDIA Container Toolkit on Amazon Linux 1 and Amazon Linux 2.</p>
<section id="setting-up-docker-on-amazon-linux">
<h5>Setting up Docker on Amazon Linux<a class="headerlink" href="#setting-up-docker-on-amazon-linux" title="Permalink to this heading"></a></h5>
<p>Amazon Linux is available on Amazon EC2 instances. For full install instructions, see <a class="reference external" href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html#install_docker">Docker basics for Amazon ECS</a>.</p>
<p>After launching the official Amazon Linux EC2 image, update the installed packages and install the most recent Docker CE packages:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>update<span class="w"> </span>-y
</pre></div>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">docker</span></code> package:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>amazon-linux-extras<span class="w"> </span>install<span class="w"> </span>docker
</pre></div>
</div>
<p>Ensure the Docker service is running with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>--now<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</pre></div>
</div>
<p>And finally, test your Docker installation by running the <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>hello-world
</pre></div>
</div>
<p>This should result in a console output shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Unable to find image &#39;hello-world:latest&#39; locally</span>
<span class="go">latest: Pulling from library/hello-world</span>
<span class="go">0e03bdcc26d7: Pull complete</span>
<span class="go">Digest: sha256:7f0a9f93b4aa3022c3a4c147a449bf11e0941a1fd0bf4a8e6c9408b2600777c5</span>
<span class="go">Status: Downloaded newer image for hello-world:latest</span>

<span class="go">Hello from Docker!</span>
<span class="go">This message shows that your installation appears to be working correctly.</span>

<span class="go">To generate this message, Docker took the following steps:</span>
<span class="go">1. The Docker client contacted the Docker daemon.</span>
<span class="go">2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span>
<span class="go">   (amd64)</span>
<span class="go">3. The Docker daemon created a new container from that image which runs the</span>
<span class="go">   executable that produces the output you are currently reading.</span>
<span class="go">4. The Docker daemon streamed that output to the Docker client, which sent it</span>
<span class="go">   to your terminal.</span>

<span class="go">To try something more ambitious, you can run an Ubuntu container with:</span>
<span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash

<span class="go">Share images, automate workflows, and more with a free Docker ID:</span>
<span class="go">https://hub.docker.com/</span>

<span class="go">For more examples and ideas, visit:</span>
<span class="go">https://docs.docker.com/get-started/</span>
</pre></div>
</div>
</section>
<section id="id5">
<h5>Setting up NVIDIA Container Toolkit<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h5>
<p>Setup the <code class="docutils literal notranslate"><span class="pre">stable</span></code> repository and the GPG key:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ID$VERSION_ID</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.repo<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/yum.repos.d/nvidia-docker.repo
</pre></div>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">nvidia-docker2</span></code> package (and dependencies) after updating the package listing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>yum<span class="w"> </span>clean<span class="w"> </span>expire-cache
</pre></div>
</div>
<p>Restart the Docker daemon to complete the installation after setting the default runtime:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</pre></div>
</div>
<p>At this point, a working setup can be tested by running a base CUDA container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>nvidia/cuda:11.0-base<span class="w"> </span>nvidia-smi
</pre></div>
</div>
<p>This should result in a console output shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| NVIDIA-SMI 450.51.06    Driver Version: 450.51.06    CUDA Version: 11.0     |</span>
<span class="go">|-------------------------------+----------------------+----------------------+</span>
<span class="go">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span>
<span class="go">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span>
<span class="go">|                               |                      |               MIG M. |</span>
<span class="go">|===============================+======================+======================|</span>
<span class="go">|   0  Tesla T4            On   | 00000000:00:1E.0 Off |                    0 |</span>
<span class="go">| N/A   34C    P8     9W /  70W |      0MiB / 15109MiB |      0%      Default |</span>
<span class="go">|                               |                      |                  N/A |</span>
<span class="go">+-------------------------------+----------------------+----------------------+</span>

<span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| Processes:                                                                  |</span>
<span class="go">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span>
<span class="go">|        ID   ID                                                   Usage      |</span>
<span class="go">|=============================================================================|</span>
<span class="go">|  No running processes found                                                 |</span>
<span class="go">+-----------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<hr class="docutils" />
<section id="containerd">
<h2>containerd<a class="headerlink" href="#containerd" title="Permalink to this heading"></a></h2>
<section id="id6">
<h3>Getting Started<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<p>For installing containerd, follow the official <a class="reference external" href="https://containerd.io/docs/getting-started/">instructions</a> for your supported Linux distribution.
For convenience, the documentation below includes instructions on installing containerd for various Linux distributions supported by NVIDIA.</p>
<section id="step-0-pre-requisites">
<h4>Step 0: Pre-Requisites<a class="headerlink" href="#step-0-pre-requisites" title="Permalink to this heading"></a></h4>
<p>To install <code class="docutils literal notranslate"><span class="pre">containerd</span></code> as the container engine on the system, install some pre-requisite modules:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>modprobe<span class="w"> </span>overlay<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>modprobe<span class="w"> </span>br_netfilter
</pre></div>
</div>
<p>You can also ensure these are persistent:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>&lt;&lt;EOF<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/modules-load.d/containerd.conf
<span class="go">overlay</span>
<span class="go">br_netfilter</span>
<span class="go">EOF</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you’re going to use <code class="docutils literal notranslate"><span class="pre">containerd</span></code> as a CRI runtime with Kubernetes, configure the <code class="docutils literal notranslate"><span class="pre">sysctl</span></code> parameters:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>&lt;&lt;EOF<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/sysctl.d/99-kubernetes-cri.conf
<span class="go">net.bridge.bridge-nf-call-iptables  = 1</span>
<span class="go">net.ipv4.ip_forward                 = 1</span>
<span class="go">net.bridge.bridge-nf-call-ip6tables = 1</span>
<span class="go">EOF</span>
</pre></div>
</div>
<p>And then apply the params:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>sysctl<span class="w"> </span>--system
</pre></div>
</div>
</div>
</section>
<section id="step-1-install-containerd">
<h4>Step 1: Install containerd<a class="headerlink" href="#step-1-install-containerd" title="Permalink to this heading"></a></h4>
<p>After the pre-requisities, we can proceed with installing <em>containerd</em> for your Linux distribution.</p>
<p>Setup the Docker repository:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-6-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-6-6-0" name="6-0" role="tab" tabindex="0">Ubuntu LTS</button></div><div aria-labelledby="tab-6-6-0" class="sphinx-tabs-panel" id="panel-6-6-0" name="6-0" role="tabpanel" tabindex="0"><ol class="arabic">
<li><p>Install packages to allow <code class="docutils literal notranslate"><span class="pre">apt</span></code> to use a repository over HTTPS:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>apt-transport-https<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>ca-certificates<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>gnupg-agent<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>software-properties-common
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Add the repository GPG key and the repo:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://download.docker.com/linux/ubuntu/gpg<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>apt-key<span class="w"> </span>add<span class="w"> </span>-
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>add-apt-repository<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="s2">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span>
<span class="gp">    $</span><span class="s2">(lsb_release -cs) \</span>
<span class="s2">    stable&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div></div>
<p>Now, install the <code class="docutils literal notranslate"><span class="pre">containerd</span></code> package:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-7-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-7-7-0" name="7-0" role="tab" tabindex="0">Ubuntu LTS</button></div><div aria-labelledby="tab-7-7-0" class="sphinx-tabs-panel" id="panel-7-7-0" name="7-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>containerd.io
</pre></div>
</div>
</div></div>
<p>Configure <code class="docutils literal notranslate"><span class="pre">containerd</span></code> with a default <code class="docutils literal notranslate"><span class="pre">config.toml</span></code> configuration file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/containerd<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>containerd<span class="w"> </span>config<span class="w"> </span>default<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/containerd/config.toml
</pre></div>
</div>
<p>For using the NVIDIA runtime, additional configuration is required. The following options should be added to configure
<code class="docutils literal notranslate"><span class="pre">nvidia</span></code> as a runtime and use <code class="docutils literal notranslate"><span class="pre">systemd</span></code> as the cgroup driver. A patch is provided below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>&lt;&lt;EOF<span class="w"> </span>&gt;<span class="w"> </span>containerd-config.patch
<span class="go">--- config.toml.orig    2020-12-18 18:21:41.884984894 +0000</span>
<span class="go">+++ /etc/containerd/config.toml 2020-12-18 18:23:38.137796223 +0000</span>
<span class="go">@@ -94,6 +94,15 @@</span>
<span class="go">        privileged_without_host_devices = false</span>
<span class="go">        base_runtime_spec = &quot;&quot;</span>
<span class="go">        [plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.runc.options]</span>
<span class="go">+            SystemdCgroup = true</span>
<span class="go">+       [plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.nvidia]</span>
<span class="go">+          privileged_without_host_devices = false</span>
<span class="go">+          runtime_engine = &quot;&quot;</span>
<span class="go">+          runtime_root = &quot;&quot;</span>
<span class="go">+          runtime_type = &quot;io.containerd.runc.v1&quot;</span>
<span class="go">+          [plugins.&quot;io.containerd.grpc.v1.cri&quot;.containerd.runtimes.nvidia.options]</span>
<span class="go">+            BinaryName = &quot;/usr/bin/nvidia-container-runtime&quot;</span>
<span class="go">+            SystemdCgroup = true</span>
<span class="go">    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.cni]</span>
<span class="go">    bin_dir = &quot;/opt/cni/bin&quot;</span>
<span class="go">    conf_dir = &quot;/etc/cni/net.d&quot;</span>
<span class="go">EOF</span>
</pre></div>
</div>
<p>After apply the configuration patch, restart <code class="docutils literal notranslate"><span class="pre">containerd</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>containerd
</pre></div>
</div>
<p>You can test the installation by using the Docker <code class="docutils literal notranslate"><span class="pre">hello-world</span></code> container with the <code class="docutils literal notranslate"><span class="pre">ctr</span></code> tool:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>ctr<span class="w"> </span>image<span class="w"> </span>pull<span class="w"> </span>docker.io/library/hello-world:latest<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>ctr<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-t<span class="w"> </span>docker.io/library/hello-world:latest<span class="w"> </span>hello-world
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Hello from Docker!</span>
<span class="go">This message shows that your installation appears to be working correctly.</span>

<span class="go">To generate this message, Docker took the following steps:</span>
<span class="go">1. The Docker client contacted the Docker daemon.</span>
<span class="go">2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span>
<span class="go">    (amd64)</span>
<span class="go">3. The Docker daemon created a new container from that image which runs the</span>
<span class="go">    executable that produces the output you are currently reading.</span>
<span class="go">4. The Docker daemon streamed that output to the Docker client, which sent it</span>
<span class="go">    to your terminal.</span>

<span class="go">To try something more ambitious, you can run an Ubuntu container with:</span>
<span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash

<span class="go">Share images, automate workflows, and more with a free Docker ID:</span>
<span class="go">https://hub.docker.com/</span>

<span class="go">For more examples and ideas, visit:</span>
<span class="go">https://docs.docker.com/get-started/</span>
</pre></div>
</div>
</section>
<section id="step-2-install-nvidia-container-toolkit">
<h4>Step 2: Install NVIDIA Container Toolkit<a class="headerlink" href="#step-2-install-nvidia-container-toolkit" title="Permalink to this heading"></a></h4>
<p>After installing containerd, we can proceed to install the NVIDIA Container Toolkit. For <code class="docutils literal notranslate"><span class="pre">containerd</span></code>, we need to use
the <code class="docutils literal notranslate"><span class="pre">nvidia-container-runtime</span></code> package. See the <a class="reference internal" href="arch-overview.html#arch-overview-1-7-0"><span class="std std-ref">architecture overview</span></a>
for more details on the package hierarchy.</p>
<p>First, setup the package repository and GPG key:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-8-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-8-8-0" name="8-0" role="tab" tabindex="0">Ubuntu LTS</button></div><div aria-labelledby="tab-8-8-0" class="sphinx-tabs-panel" id="panel-8-8-0" name="8-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ID$VERSION_ID</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/gpgkey<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>apt-key<span class="w"> </span>add<span class="w"> </span>-<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.list<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/nvidia-docker.list
</pre></div>
</div>
</div></div>
<p>Now, install the NVIDIA runtime:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-9-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-9-9-0" name="9-0" role="tab" tabindex="0">Ubuntu LTS</button></div><div aria-labelledby="tab-9-9-0" class="sphinx-tabs-panel" id="panel-9-9-0" name="9-0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-container-runtime
</pre></div>
</div>
</div></div>
<p>Then, we can test a GPU container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>ctr<span class="w"> </span>image<span class="w"> </span>pull<span class="w"> </span>docker.io/nvidia/cuda:11.0-base
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>ctr<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span><span class="m">0</span><span class="w"> </span>-t<span class="w"> </span>docker.io/nvidia/cuda:11.0-base<span class="w"> </span>cuda-11.0-base<span class="w"> </span>nvidia-smi
</pre></div>
</div>
<p>You should see an output similar to the one shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| NVIDIA-SMI 450.80.02    Driver Version: 450.80.02    CUDA Version: 11.0     |</span>
<span class="go">|-------------------------------+----------------------+----------------------+</span>
<span class="go">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span>
<span class="go">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span>
<span class="go">|                               |                      |               MIG M. |</span>
<span class="go">|===============================+======================+======================|</span>
<span class="go">|   0  Tesla T4            On   | 00000000:00:1E.0 Off |                    0 |</span>
<span class="go">| N/A   34C    P8     9W /  70W |      0MiB / 15109MiB |      0%      Default |</span>
<span class="go">|                               |                      |                  N/A |</span>
<span class="go">+-------------------------------+----------------------+----------------------+</span>

<span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| Processes:                                                                  |</span>
<span class="go">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span>
<span class="go">|        ID   ID                                                   Usage      |</span>
<span class="go">|=============================================================================|</span>
<span class="go">|  No running processes found                                                 |</span>
<span class="go">+-----------------------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="podman">
<h2>podman<a class="headerlink" href="#podman" title="Permalink to this heading"></a></h2>
<section id="id8">
<h3>Getting Started<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<p>For installing podman, follow the official <a class="reference external" href="https://podman.io/getting-started/installation">instructions</a> for your supported Linux distribution.
For convenience, the documentation below includes instructions on installing podman on RHEL 8.</p>
<section id="step-1-install-podman">
<h4>Step 1: Install podman<a class="headerlink" href="#step-1-install-podman" title="Permalink to this heading"></a></h4>
<p>On RHEL 8, check if the <code class="docutils literal notranslate"><span class="pre">container-tools</span></code> module is available:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>module<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>container-tools
</pre></div>
</div>
<p>This should return an output as shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">container-tools      rhel8 [d]          common [d]                               Most recent (rolling) versions of podman, buildah, skopeo, runc, conmon, runc, conmon, CRIU, Udica, etc as well as dependencies such as container-selinux built and tested together, and updated as frequently as every 12 weeks.</span>
<span class="go">container-tools      1.0                common [d]                               Stable versions of podman 1.0, buildah 1.5, skopeo 0.1, runc, conmon, CRIU, Udica, etc as well as dependencies such as container-selinux built and tested together, and supported for 24 months.</span>
<span class="go">container-tools      2.0                common [d]                               Stable versions of podman 1.6, buildah 1.11, skopeo 0.1, runc, conmon, etc as well as dependencies such as container-selinux built and tested together, and supported as documented on the Application Stream lifecycle page.</span>
<span class="go">container-tools      rhel8 [d]          common [d]                               Most recent (rolling) versions of podman, buildah, skopeo, runc, conmon, runc, conmon, CRIU, Udica, etc as well as dependencies such as container-selinux built and tested together, and updated as frequently as every 12 weeks.</span>
<span class="go">container-tools      1.0                common [d]                               Stable versions of podman 1.0, buildah 1.5, skopeo 0.1, runc, conmon, CRIU, Udica, etc as well as dependencies such as container-selinux built and tested together, and supported for 24 months.</span>
<span class="go">container-tools      2.0                common [d]                               Stable versions of podman 1.6, buildah 1.11, skopeo 0.1, runc, conmon, etc as well as dependencies such as container-selinux built and tested together, and supported as documented on the Application Stream lifecycle page.</span>
</pre></div>
</div>
<p>Now, proceed to install the <code class="docutils literal notranslate"><span class="pre">container-tools</span></code> module, which will install <code class="docutils literal notranslate"><span class="pre">podman</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>module<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>container-tools
</pre></div>
</div>
<p>Once, <code class="docutils literal notranslate"><span class="pre">podman</span></code> is installed, check the version:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>podman<span class="w"> </span>version
<span class="go">Version:      2.2.1</span>
<span class="go">API Version:  2</span>
<span class="go">Go Version:   go1.14.7</span>
<span class="go">Built:        Mon Feb  8 21:19:06 2021</span>
<span class="go">OS/Arch:      linux/amd64</span>
</pre></div>
</div>
</section>
<section id="id10">
<h4>Step 2: Install NVIDIA Container Toolkit<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h4>
<p>After installing <code class="docutils literal notranslate"><span class="pre">podman</span></code>, we can proceed to install the NVIDIA Container Toolkit. For <code class="docutils literal notranslate"><span class="pre">podman</span></code>, we need to use
the <code class="docutils literal notranslate"><span class="pre">nvidia-container-toolkit</span></code> package. See the <a class="reference internal" href="arch-overview.html#arch-overview-1-7-0"><span class="std std-ref">architecture overview</span></a>
for more details on the package hierarchy.</p>
<p>First, setup the package repository and GPG key:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$ID$VERSION_ID</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>curl<span class="w"> </span>-s<span class="w"> </span>-L<span class="w"> </span>https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.repo<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/yum.repos.d/nvidia-docker.repo
</pre></div>
</div>
<p>Now, install the NVIDIA runtime:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dnf<span class="w"> </span>clean<span class="w"> </span>expire-cache<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>nvidia-container-toolkit
</pre></div>
</div>
<p>Once the package installation is complete, ensure that the <code class="docutils literal notranslate"><span class="pre">hook</span></code> has been added:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w">  </span>/usr/share/containers/oci/hooks.d/oci-nvidia-hook.json
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hook&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/usr/bin/nvidia-container-toolkit&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nvidia-container-toolkit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;prestart&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;env&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;when&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;always&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;commands&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;.*&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;stages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;prestart&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="step-3-rootless-containers-setup">
<h4>Step 3: Rootless Containers Setup<a class="headerlink" href="#step-3-rootless-containers-setup" title="Permalink to this heading"></a></h4>
<p>To be able to run rootless containers with <code class="docutils literal notranslate"><span class="pre">podman</span></code>, we need the following configuration change to the NVIDIA runtime:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/^#no-cgroups = false/no-cgroups = true/;&#39;</span><span class="w"> </span>/etc/nvidia-container-runtime/config.toml
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the user running the containers is a privileged user (e.g. <code class="docutils literal notranslate"><span class="pre">root</span></code>) this change should not be made and will cause
containers using the NVIDIA Container Toolkit to fail.</p>
</div>
</section>
<section id="step-4-running-sample-workloads">
<h4>Step 4: Running Sample Workloads<a class="headerlink" href="#step-4-running-sample-workloads" title="Permalink to this heading"></a></h4>
<p>We can now run some sample GPU containers to test the setup.</p>
<ol class="arabic">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code></p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>podman<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--security-opt<span class="o">=</span><span class="nv">label</span><span class="o">=</span>disable<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--hooks-dir<span class="o">=</span>/usr/share/containers/oci/hooks.d/<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>nvidia/cuda:11.0-base<span class="w"> </span>nvidia-smi
</pre></div>
</div>
</div></blockquote>
<p>which should produce the following output:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| NVIDIA-SMI 460.32.03    Driver Version: 460.32.03    CUDA Version: 11.2     |</span>
<span class="go">|-------------------------------+----------------------+----------------------+</span>
<span class="go">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span>
<span class="go">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span>
<span class="go">|                               |                      |               MIG M. |</span>
<span class="go">|===============================+======================+======================|</span>
<span class="go">|   0  Tesla T4            Off  | 00000000:00:1E.0 Off |                    0 |</span>
<span class="go">| N/A   46C    P0    27W /  70W |      0MiB / 15109MiB |      0%      Default |</span>
<span class="go">|                               |                      |                  N/A |</span>
<span class="go">+-------------------------------+----------------------+----------------------+</span>

<span class="go">+-----------------------------------------------------------------------------+</span>
<span class="go">| Processes:                                                                  |</span>
<span class="go">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span>
<span class="go">|        ID   ID                                                   Usage      |</span>
<span class="go">|=============================================================================|</span>
<span class="go">|  No running processes found                                                 |</span>
<span class="go">+-----------------------------------------------------------------------------+</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run an FP16 GEMM workload on the GPU that can leverage the Tensor Cores when available:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>podman<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>--security-opt<span class="o">=</span><span class="nv">label</span><span class="o">=</span>disable<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--hooks-dir<span class="o">=</span>/usr/share/containers/oci/hooks.d/<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--cap-add<span class="w"> </span>SYS_ADMIN<span class="w"> </span>nvidia/samples:dcgmproftester-2.0.10-cuda11.0-ubuntu18.04<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--no-dcgm-validation<span class="w"> </span>-t<span class="w"> </span><span class="m">1004</span><span class="w"> </span>-d<span class="w"> </span><span class="m">30</span>
</pre></div>
</div>
<p>You should be able to see an output as shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Skipping CreateDcgmGroups() since DCGM validation is disabled</span>
<span class="go">CU_DEVICE_ATTRIBUTE_MAX_THREADS_PER_MULTIPROCESSOR: 1024</span>
<span class="go">CU_DEVICE_ATTRIBUTE_MULTIPROCESSOR_COUNT: 40</span>
<span class="go">CU_DEVICE_ATTRIBUTE_MAX_SHARED_MEMORY_PER_MULTIPROCESSOR: 65536</span>
<span class="go">CU_DEVICE_ATTRIBUTE_COMPUTE_CAPABILITY_MAJOR: 7</span>
<span class="go">CU_DEVICE_ATTRIBUTE_COMPUTE_CAPABILITY_MINOR: 5</span>
<span class="go">CU_DEVICE_ATTRIBUTE_GLOBAL_MEMORY_BUS_WIDTH: 256</span>
<span class="go">CU_DEVICE_ATTRIBUTE_MEMORY_CLOCK_RATE: 5001000</span>
<span class="go">Max Memory bandwidth: 320064000000 bytes (320.06 GiB)</span>
<span class="go">CudaInit completed successfully.</span>

<span class="go">Skipping WatchFields() since DCGM validation is disabled</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27334.5 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27795.5 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27846.0 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27865.9 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27837.6 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27709.7 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27615.3 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27620.3 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27530.7 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27477.4 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27461.1 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27454.6 gflops)</span>
<span class="go">TensorEngineActive: generated ???, dcgm 0.000 (27381.2 gflops)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="arch-overview.html" class="btn btn-neutral float-left" title="Architecture Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="user-guide.html" class="btn btn-neutral float-right" title="User Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2023, NVIDIA Corporation.
      <span class="lastupdated">Last updated on 2023-03-09.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
  a:link, a:visited {
    color: #76b900;
  }

  a:hover {
    color: #8c0;
  }

  .rst-content dl:not(.docutils) dt {
    background: rgba(118, 185, 0, 0.1);
    color: rgba(59,93,0,1);
    border-top: solid 3px rgba(59,93,0,1);
  }
  </style>
  

</body>
</html>